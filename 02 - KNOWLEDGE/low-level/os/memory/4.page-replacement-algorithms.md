# Page Replacement Algorithm


Se requiere de la selección de un algoritmo de reemplazo en particular que presente la menor tasa de fallas de página. Se evalúa un algoritmo ejecutándolo para una serie determinada de referencias a memoria y calculando el número de fallas de página

## Óptimo

El algoritmo óptimo representa el caso teórico ideal y consiste en ir sustituyendo la página de memoria que más tardará en ser referenciada. Su dificultad consiste en que es imposible de instrumentar, pues es difícil conocer el futuro. 

## FIFO (First Come First Out)

El algoritmo de reemplazo más simple es el FIFO (First Come First Out). Consiste en seleccionar como víctima a la página que lleva más tiempo en la memoria. Para la instrumentación se puede hacer uso de una cola en el orden de llegada. En general **no es un buen algoritmo**, tiene la dificultad de que se puede sustituir una página que todavía se esté usando. Si se usa el pasado reciente como una aproximación del futuro cercano se llega a todo un conjunto de técnicas o algoritmos de reemplazo.

## El Reloj

Es un algoritmo que se basa en el FIFO pero teniendo en cuenta si la página se está usando, para ello requiere un bit por cada página para la indicación. Aunque puede requerir hardware adicional por su compleja implementación, han surgido variantes por software muy efectivas

## LRU (Least Recently Used)

El algoritmo LRU (Least Recently Used) sustituye la página menos recientemente usada, es decir la que hace más tiempo no se usa. Se implementa a través de un contador de tiempo, que se incrementa con cada referencia a la memoria. Dicho valor se registra en la entrada de la tabla de páginas correspondiente a la página que hizo la referencia. El sistema operativo examina todos los contadores de la tabla de páginas y elige el mínimo

Es lo que usan los mobiles

## Ejemplos

En un sistema con memoria virtual, con paginación por demanda donde las direcciones lógicas tienen 10 bits y cada proceso puede tener un máximo de 8 páginas, suponga que un proceso P genera la siguiente secuencia de direcciones virtuales: 34,130, 280, 401, 100, 212, 560, 98, 240,256. Se conoce además que cuenta con 5 marcos.

![[Pasted image 20240310163037 1.webp]]


### Identificar el tamaño de página

A partir de los datos proporcionados en el ejercicio se conoce que:

(...) las direcciones lógicas tienen **10 bits** y **cada proceso puede tener un máximo de 8 páginas**, suponga que un proceso P genera la siguiente secuencia de direcciones virtuales: 34,130, 280, 401, 100, 212, 560, 98, 240,256. Se conoce además que cuenta con **5 marcos**.

![[Pasted image 20240310163052 1.webp]]

- ¿Para numerar 8 páginas cuántos bits necesitas?
    - 3bits
- ¿Cuál sería entonces el tamaño de las páginas?
    - 128Mb, ¿por qué?
    - Pues porque de los 10bits de las direcciones lógicas quedan 7bits para el desplazamiento dentro de la página y con 7bits se pueden generar 128 direcciones, cada una a un byte de la memoria.

### Identificar página de cada referencia

Si se conoce que las páginas son de 128Mb, ¿cómo determinar que página corresponde cada referencia?

- Si se hace una referencia a la dirección **34Mb**, se puede concluir que se encuentra en la **página 0**, porque si cada una tiene 128Mb pues 34<128, por lo que no ha salido de la primera página.
- Cuando hace referencia a la dirección 280Mb o superior, es menos visible, ¿Se puede calcular matemáticamente?
    - Si, si se divide 280/tamaño de página, el valor entero resultante será el número de página.
    - En este caso sería página 2.

![[Pasted image 20240310163135 1.webp]]


### Estado inicial de la memoria

A partir de los datos proporcionados en el ejercicio se conoce que:

(...) Se conoce además que cuenta con **5 marcos**.

- Si se quiere analizar el comportamiento del algoritmo de reemplazo de páginas se debe representar como un diagrama de Gantt: en la vertical los marcos, en la horizontal su estado en el tiempo.
- Otro elemento importante es conocer si los datos del ejercicio me indican que existen ya páginas activas en la memoria.
    - tal como resalta en la figura que ocurre con la **página 0** activa(_**bit de validez en 1**_).
    - _**ubicada en el marco 4.**_

![[Pasted image 20240310163146 1.webp]]

De esta misma manera revisaremos toda la información brindada en el fragmento de tabla de página buscando las páginas activas y en qué marco están ubicadas. Debe quedarte de la siguiente manera:

![[Pasted image 20240310163154 1.webp|300]]

Una vez que se tenga estas informaciones solo queda identificar que ocurre con cada referencia teniendo en cuenta que si se necesita reemplazar páginas debe valorar los criterios indicados por el algoritmo definido.


### Resolución del ejemplo

![[Pasted image 20240310163109 1.webp]]


ver 
[eva.uci.cu/pluginfile.php/72218/mod_resource/content/1/Gestión de memoria.html#h5pbookid=1907194512&chapter=h5p-interactive-book-chapter-62953bf0-d628-4cef-8c06-9562f4250616&section=0](https://eva.uci.cu/pluginfile.php/72218/mod_resource/content/1/Gesti%C3%B3n%20de%20memoria.html#h5pbookid=1907194512&chapter=h5p-interactive-book-chapter-62953bf0-d628-4cef-8c06-9562f4250616&section=0)